{
  "version": 3,
  "file": "ngx-viewport.js",
  "sources": [
    "ng://ngx-viewport/out/src/app/modules/ngx-in-viewport/ngx-in-viewport.module.ts",
    "ng://ngx-viewport/out/src/app/modules/ngx-in-viewport/ngx-in-viewport.directive.ts",
    "ng://ngx-viewport/out/src/app/modules/ngx-in-viewport/ngx-in-viewport.service.ts",
    "ng://ngx-viewport/out/src/app/modules/ngx-in-viewport/window-token.module.ts"
  ],
  "sourcesContent": [
    "import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { InViewportDirective } from './ngx-in-viewport.directive';\nimport { NgxInViewportService } from './ngx-in-viewport.service';\nimport { WindowTokenModule } from './window-token.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    WindowTokenModule,\n  ],\n  declarations: [\n    InViewportDirective,\n  ],\n  exports: [\n    InViewportDirective,\n  ],\n})\nexport class InViewportModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: InViewportModule,\n      providers: [\n        NgxInViewportService,\n      ],\n    };\n  }\n}\n",
    "import { AfterViewInit, Directive, ElementRef, EventEmitter, OnDestroy, Output } from '@angular/core';\nimport { NgxInViewportService } from './ngx-in-viewport.service';\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: '[in-viewport]'\n})\nexport class InViewportDirective implements AfterViewInit, OnDestroy {\n  @Output() inViewportAction = new EventEmitter();\n\n  constructor(private inViewportService: NgxInViewportService, private element: ElementRef) { }\n\n  ngAfterViewInit() {\n    this.inViewportService\n      .addDetectListener(this.element.nativeElement, () => this.inViewportAction.emit());\n  }\n\n  ngOnDestroy() {\n    this.inViewportService.removeDetectListener(this.element.nativeElement);\n  }\n}\n",
    "import { Inject, Injectable } from '@angular/core';\nimport { WINDOW } from './window-token.module';\nimport { DOCUMENT } from '@angular/common';\n\ninterface Handler {\n  element: HTMLElement;\n  listener: any;\n}\n\n@Injectable()\nexport class NgxInViewportService {\n  private handlers: Handler[] = [];\n\n  constructor(\n    @Inject(WINDOW) private window: any,\n    @Inject(DOCUMENT) private document: any,\n  ) { }\n\n  addDetectListener(element: HTMLElement, inViewportHandler: () => void) {\n    if (!this.window || !element || !inViewportHandler) return;\n\n    const handler: Handler = {\n      listener: () => this.elementOnViewport(element, inViewportHandler),\n      element: element,\n    };\n\n    this.elementOnViewport(element, inViewportHandler); // need when page has been loaded\n    this.window.addEventListener('scroll', handler.listener);\n\n    this.handlers.push(handler);\n  }\n\n  removeDetectListener(element: HTMLElement) {\n    const handler = this.handlers.find(h => h.element === element);\n    this.window.removeEventListener('scroll', handler.listener);\n  }\n\n  private elementOnViewport(element: HTMLElement, inViewportHandler: () => void) {\n    if (this.isElementOnViewport(element)) inViewportHandler();\n  }\n\n  private isElementOnViewport(element: HTMLElement): boolean {\n    if (!this.window || !this.document) return;\n\n    const clientRect: ClientRect = element.getBoundingClientRect();\n    return !!clientRect &&\n      clientRect.top <= this.document.body.clientHeight &&\n      clientRect.left <= this.document.body.clientWidth &&\n      clientRect.bottom >= 0 &&\n      clientRect.right >= 0;\n  }\n}\n",
    "import { NgModule } from '@angular/core';\nimport { InjectionToken } from '@angular/core';\n\nexport const WINDOW = new InjectionToken<any>('WindowToken');\n\nexport function _window(): any {\n  return typeof window !== 'undefined' && window ? window : {};\n}\n\n@NgModule({\n  providers: [{\n    provide: WINDOW,\n    useFactory: _window\n  }]\n})\nexport class WindowTokenModule { }\n"
  ],
  "names": [],
  "mappings": "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"
}
